{% extends "base_projects.html" %}
{% block title %}Project List{% endblock %}

{% block content %}
<a class="add-project-btn" href="{% url 'project_create' %}">+ Add Project</a>

<div class="search-bar">
  <form method="get">
    <input type="date" name="date" value="{{ request.GET.date }}">
    <button type="submit">Search</button>
  </form>
</div>

<div class="projects-grid">
  {% for project in projects %}
  <div class="project-card">
    <h3>{{ project.title }}</h3>
    <p><strong>Description:</strong> {{ project.description|truncatechars:100 }}</p>
    <p><strong>Start:</strong> {{ project.start_date }}</p>
    <p><strong>End:</strong> {{ project.end_date }}</p>
    <p><strong>Owner:</strong> {{ project.owner.first_name }}</p>
    <div class="card-buttons">
      <a class="edit-btn" href="{% url 'project_edit' project.pk %}">Edit</a>
      <form action="{% url 'project_delete' project.pk %}" method="post" style="display:inline;">
        {% csrf_token %}
        <button class="delete-btn" type="submit">Delete</button>
      </form>
    </div>
  </div>
  {% empty %}
    <p>No projects found.</p>
  {% endfor %}
</div>
{% endblock %}
